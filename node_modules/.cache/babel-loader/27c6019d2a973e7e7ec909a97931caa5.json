{"remainingRequest":"G:\\vuehr\\node_modules\\babel-loader\\lib\\index.js!G:\\vuehr\\node_modules\\eslint-loader\\index.js??ref--13-0!G:\\vuehr\\src\\utils\\menus.js","dependencies":[{"path":"G:\\vuehr\\src\\utils\\menus.js","mtime":1585203646920},{"path":"G:\\vuehr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\vuehr\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\vuehr\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { getRequest } from \"@/utils/api\";\nimport Vue from 'vue';\nimport router from \"@/router\"; // import store from 'store'\n\nimport format from \"element-ui/src/locale/format\";\nimport store from \"@vue/cli-service/generator/vuex/template/src/store\";\n/**\r\n * 菜单数据格式化\r\n * @param router\r\n * @param store\r\n */\n\nexport var initMenu = function initMenu(router, store) {\n  //如果用户按F5,state中没有值，所以重新赋值，如果有值，就是用户正常点击跳转\n  if (store.state.length > 0) return; //服务端返回的数据是字符串,需要格式化\n\n  getRequest(\"/system/config/menu\").then(function (data) {\n    if (data) {\n      var fmtRoutes = formatRoutes(data);\n      router.addRoutes(fmtRoutes); //调用store的方法\n\n      store.commit('initRoutes', fmtRoutes);\n    }\n  });\n}; //遍历,批量的遍历定义\n\nexport var formatRoutes = function formatRoutes(routes) {\n  var fmRoutes = [];\n  routes.forEach(function (router) {\n    var path = router.path,\n        _component = router.component,\n        name = router.name,\n        meta = router.meta,\n        iconCls = router.iconCls,\n        children = router.children;\n\n    if (children && children instanceof Array) {\n      //满足有children且children是一个Array形式的数组，说明是二级菜单，重新赋值\n      children = formatRoutes(children);\n    }\n\n    var fmRouter = {\n      path: path,\n      name: name,\n      iconCls: iconCls,\n      meta: meta,\n      children: children,\n      //动态加载\n      component: function component(resolve) {\n        if (_component.startsWith(\"Home\")) {\n          require(['../views/' + _component + '.vue'], resolve);\n        } else if (_component.startsWith(\"Emp\")) {\n          require(['../views/emp/' + _component + '.vue'], resolve);\n        } else if (_component.startsWith(\"Per\")) {\n          require(['../views/per/' + _component + '.vue'], resolve);\n        } else if (_component.startsWith(\"Sal\")) {\n          require(['../views/sal/' + _component + '.vue'], resolve);\n        } else if (_component.startsWith(\"Sta\")) {\n          require(['../views/sta/' + _component + '.vue'], resolve);\n        } else if (_component.startsWith(\"Sys\")) {\n          require(['../views/sys/' + _component + '.vue'], resolve);\n        }\n      }\n    };\n    fmRoutes.push(fmRouter);\n  });\n  return fmRoutes;\n};",{"version":3,"sources":["G:/vuehr/src/utils/menus.js"],"names":["getRequest","Vue","router","format","store","initMenu","state","length","then","data","fmtRoutes","formatRoutes","addRoutes","commit","routes","fmRoutes","forEach","path","component","name","meta","iconCls","children","Array","fmRouter","resolve","startsWith","require","push"],"mappings":"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","sourcesContent":["import {getRequest} from \"@/utils/api\";\r\nimport Vue from 'vue'\r\nimport router from \"@/router\";\r\n// import store from 'store'\r\nimport format from \"element-ui/src/locale/format\";\r\nimport store from \"@vue/cli-service/generator/vuex/template/src/store\";\r\n\r\n/**\r\n * 菜单数据格式化\r\n * @param router\r\n * @param store\r\n */\r\n\r\nexport const initMenu=(router,store)=>{\r\n    //如果用户按F5,state中没有值，所以重新赋值，如果有值，就是用户正常点击跳转\r\n    if (store.state.length>0)\r\n        return;\r\n    //服务端返回的数据是字符串,需要格式化\r\n    getRequest(\"/system/config/menu\").then(data=>{\r\n        if (data){\r\n            let fmtRoutes=formatRoutes(data);\r\n            router.addRoutes(fmtRoutes);\r\n            //调用store的方法\r\n            store.commit('initRoutes',fmtRoutes)\r\n        }\r\n    })\r\n}\r\n\r\n\r\n//遍历,批量的遍历定义\r\nexport const formatRoutes=(routes)=>{\r\n    let fmRoutes =[];\r\n    routes.forEach(router=>{\r\n        let {\r\n            path,\r\n            component,\r\n            name,\r\n            meta,\r\n            iconCls,\r\n            children,\r\n        }=router\r\n        if (children&&children instanceof Array){\r\n            //满足有children且children是一个Array形式的数组，说明是二级菜单，重新赋值\r\n            children = formatRoutes(children)\r\n        }\r\n        let fmRouter={\r\n            path:path,\r\n            name:name,\r\n            iconCls:iconCls,\r\n            meta:meta,\r\n            children: children,\r\n            //动态加载\r\n            component(resolve) {\r\n                if (component.startsWith(\"Home\")) {\r\n                    require(['../views/' + component + '.vue'], resolve);\r\n                } else if (component.startsWith(\"Emp\")) {\r\n                    require(['../views/emp/' + component + '.vue'], resolve);\r\n                } else if (component.startsWith(\"Per\")) {\r\n                    require(['../views/per/' + component + '.vue'], resolve);\r\n                } else if (component.startsWith(\"Sal\")) {\r\n                    require(['../views/sal/' + component + '.vue'], resolve);\r\n                } else if (component.startsWith(\"Sta\")) {\r\n                    require(['../views/sta/' + component + '.vue'], resolve);\r\n                } else if (component.startsWith(\"Sys\")) {\r\n                    require(['../views/sys/' + component + '.vue'], resolve);\r\n                }\r\n            }\r\n        }\r\n        fmRoutes.push(fmRouter)\r\n    })\r\n    return fmRoutes;\r\n}\r\n"]}]}