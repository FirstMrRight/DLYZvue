{"remainingRequest":"G:\\vuehr\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\vuehr\\src\\views\\sys\\basic\\PosMana.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\vuehr\\src\\views\\sys\\basic\\PosMana.vue","mtime":1586529192573},{"path":"G:\\vuehr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\vuehr\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\vuehr\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\vuehr\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {getRequest} from \"@/utils/api\";\nimport {postRequest} from \"@/utils/api\";\nimport {deleteRequest} from \"@/utils/api\";\nimport {putRequest} from \"@/utils/api\";\n\nexport default {\n    name: \"PosMana\",\n    data(){\n        return{\n            pos:{\n                name:'',\n            },\n            updatePos:{\n                name:'',\n            },\n            dialogVisible:false,\n            /*表格返回的数据*/\n            positions:[],\n            multipleSelection: [],\n        }\n    },\n    mounted() {\n        this.initPositions();\n    },\n    methods:{\n        //点击事件回调\n        handleSelectionChange(val){\n            this.multipleSelection=val;\n        },\n        deleteByBatch(){\n            this.$confirm('此操作将永久删除【' + this.multipleSelection.length + '】条记录, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                let ids = '?';\n                this.multipleSelection.forEach(item => {\n                    ids += 'ids=' + item.id + '&';\n                })\n                deleteRequest(\"/system/basic/pos/\"+ids).then(resp => {\n                    if (resp) {\n                        this.initPositions();\n                    }\n                })\n            }).catch(resp => {\n                console.log(resp)\n                this.$message({\n                    type: 'info',\n                    message: '已取消删除'\n                });\n            });\n        },\n        addPosition(){\n            //判断用户是否输入值\n            /**\n             * 在使用的el-table-column标签中\n             * Element UI点击时已获取到点击的数据：index和data\n             */\n            if (this.pos.name){\n                postRequest(\"system/basic/pos/\",this.pos).then(resp=>{\n                    if (resp){\n                        //刷新表格\n                        this.initPositions();\n                        this.pos.name='';\n                    }\n                })\n            }else {\n                this.$message.error('职位不可以为空')\n            }\n        },\n        handleDelete(index,data){\n            this.$confirm('此操作将永久删除【'+data.name+'】, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                deleteRequest(\"system/basic/pos/\"+data.id).then(resp=>{\n                    if (resp){\n                        this.initPositions()\n                    }\n                })\n            }).catch(() => {\n                this.$message({\n                    type: 'error',\n                    message: '删除失败'\n                });\n            });\n        },\n\n        doUpdate() {\n            this.putRequest(\"/system/basic/pos/\", this.updatePos).then(resp => {\n                if (resp) {\n                    this.initPositions();\n                    this.updatePos.name = '';\n                    this.dialogVisible = false;\n                }\n            })\n        },\n        showEditView(index,data){\n            Object.assign(this.updatePos,data);//拷贝\n            // this.updatePos=data;\n            this.dialogVisible=true;\n        },\n        initPositions(){\n            getRequest(\"/system/basic/pos/\").then(resp=>{\n                if (resp){\n                    this.positions=resp;\n                    console.log(resp)\n                }\n            })\n        }\n    }\n}\n",{"version":3,"sources":["PosMana.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PosMana.vue","sourceRoot":"src/views/sys/basic","sourcesContent":["<template>\r\n    <div>\r\n        <div>\r\n            <el-input\r\n                    size=\"small\"\r\n                    class=\"addPosInput\"\r\n                    style=\"width: 300px;margin-right: 8px\"\r\n                placeholder=\"添加职位...\"\r\n                    prefix-icon=\"el-icon-plus\"\r\n                    @keydown.enter.native=\"addPosition\"\r\n                v-model=\"pos.name\">\r\n            </el-input>\r\n            <el-button icon=\"el-icon-plus\" size=\"small\" type=\"primary\" @click=\"addPosition\">添加</el-button>\r\n            <div class=\"posManaMain\">\r\n\r\n                <el-table\r\n                        :data=\"positions\"\r\n                        border\r\n                        @selection-change=\"handleSelectionChange\"\r\n                        size=\"small\"\r\n                        stripe\r\n                        style=\"width: 70%\">\r\n                    <el-table-column\r\n                            type=\"selection\"\r\n                            width=\"55\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"id\"\r\n                            label=\"编号\"\r\n                            width=\"55\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"name\"\r\n                            label=\"职位名称\"\r\n                            width=\"180\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"createDate\"\r\n                            width=\"150\"\r\n                            label=\"创建时间\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            label=\"是否启用\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-tag size=\"small\" type=\"success\" v-if=\"scope.row.enabled\">已启用</el-tag>\r\n                            <el-tag size=\"small\" type=\"danger\" v-else>未启用</el-tag>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column label=\"操作\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-button\r\n                                    size=\"mini\"\r\n                                    @click=\"showEditView(scope.$index, scope.row)\">编辑\r\n                            </el-button>\r\n                            <el-button\r\n                                    size=\"mini\"\r\n                                    type=\"danger\"\r\n                                    @click=\"handleDelete(scope.$index, scope.row)\">删除\r\n                            </el-button>\r\n                        </template>\r\n                    </el-table-column>\r\n                </el-table>\r\n                <!--动态判断是否选中多选框中的数据-->\r\n                <el-button @click=\"deleteByBatch\" type=\"danger\" size=\"small\" style=\"margin-top: 8px\" :disabled=\"multipleSelection.length==0\">批量删除\r\n                </el-button>\r\n            </div>\r\n            <el-dialog\r\n                    title=\"修改职位\"\r\n                    :visible.sync=\"dialogVisible\"\r\n                    width=\"30%\">\r\n                <div>\r\n                    <div>\r\n                        <el-tag>职位名称</el-tag>\r\n                        <el-input class=\"updatePosInput\" size=\"small\" v-model=\"updatePos.name\"></el-input>\r\n                    </div>\r\n<!--                    <div>-->\r\n<!--                        <el-tag>是否启用</el-tag>-->\r\n<!--                    </div>-->\r\n                </div>\r\n                <span slot=\"footer\" class=\"dialog-footer\">\r\n    <el-button size=\"small\" @click=\"dialogVisible = false\">取 消</el-button>\r\n    <el-button size=\"small\" type=\"primary\" @click=\"doUpdate\">确 定</el-button>\r\n  </span>\r\n            </el-dialog>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {getRequest} from \"@/utils/api\";\r\n    import {postRequest} from \"@/utils/api\";\r\n    import {deleteRequest} from \"@/utils/api\";\r\n    import {putRequest} from \"@/utils/api\";\r\n\r\n    export default {\r\n        name: \"PosMana\",\r\n        data(){\r\n            return{\r\n                pos:{\r\n                    name:'',\r\n                },\r\n                updatePos:{\r\n                    name:'',\r\n                },\r\n                dialogVisible:false,\r\n                /*表格返回的数据*/\r\n                positions:[],\r\n                multipleSelection: [],\r\n            }\r\n        },\r\n        mounted() {\r\n            this.initPositions();\r\n        },\r\n        methods:{\r\n            //点击事件回调\r\n            handleSelectionChange(val){\r\n                this.multipleSelection=val;\r\n            },\r\n            deleteByBatch(){\r\n                this.$confirm('此操作将永久删除【' + this.multipleSelection.length + '】条记录, 是否继续?', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    let ids = '?';\r\n                    this.multipleSelection.forEach(item => {\r\n                        ids += 'ids=' + item.id + '&';\r\n                    })\r\n                    deleteRequest(\"/system/basic/pos/\"+ids).then(resp => {\r\n                        if (resp) {\r\n                            this.initPositions();\r\n                        }\r\n                    })\r\n                }).catch(resp => {\r\n                    console.log(resp)\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '已取消删除'\r\n                    });\r\n                });\r\n            },\r\n            addPosition(){\r\n                //判断用户是否输入值\r\n                /**\r\n                 * 在使用的el-table-column标签中\r\n                 * Element UI点击时已获取到点击的数据：index和data\r\n                 */\r\n                if (this.pos.name){\r\n                    postRequest(\"system/basic/pos/\",this.pos).then(resp=>{\r\n                        if (resp){\r\n                            //刷新表格\r\n                            this.initPositions();\r\n                            this.pos.name='';\r\n                        }\r\n                    })\r\n                }else {\r\n                    this.$message.error('职位不可以为空')\r\n                }\r\n            },\r\n            handleDelete(index,data){\r\n                this.$confirm('此操作将永久删除【'+data.name+'】, 是否继续?', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    deleteRequest(\"system/basic/pos/\"+data.id).then(resp=>{\r\n                        if (resp){\r\n                            this.initPositions()\r\n                        }\r\n                    })\r\n                }).catch(() => {\r\n                    this.$message({\r\n                        type: 'error',\r\n                        message: '删除失败'\r\n                    });\r\n                });\r\n            },\r\n\r\n            doUpdate() {\r\n                this.putRequest(\"/system/basic/pos/\", this.updatePos).then(resp => {\r\n                    if (resp) {\r\n                        this.initPositions();\r\n                        this.updatePos.name = '';\r\n                        this.dialogVisible = false;\r\n                    }\r\n                })\r\n            },\r\n            showEditView(index,data){\r\n                Object.assign(this.updatePos,data);//拷贝\r\n                // this.updatePos=data;\r\n                this.dialogVisible=true;\r\n            },\r\n            initPositions(){\r\n                getRequest(\"/system/basic/pos/\").then(resp=>{\r\n                    if (resp){\r\n                        this.positions=resp;\r\n                        console.log(resp)\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .addPosInput{\r\n        margin-right: 8px;\r\n        width: 300px;\r\n    }\r\n    .posManaMain{\r\n        margin-top: 10px;\r\n    }\r\n    .updatePosInput{\r\n        width: 260px;\r\n        margin-left: 10px;\r\n    }\r\n</style>\r\n"]}]}